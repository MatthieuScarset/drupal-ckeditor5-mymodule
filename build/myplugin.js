!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.myplugin=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/utils.js")},"ckeditor5/src/widget.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";i.d(o,{default:()=>a});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/widget.js"),n=i("ckeditor5/src/ui.js"),r=i("ckeditor5/src/utils.js");class s extends e.Plugin{static get requires(){return[l,d]}static get pluginName(){return"MyPlugin"}}class l extends e.Plugin{static get requires(){return[t.Widget]}init(){console.log("MyPluginEditing#init() got called"),this._defineSchema(),this._defineConverters(),this.editor.commands.add("MyPlugin",new c(this.editor)),this.editor.editing.mapper.on("viewToModelPosition",(0,t.viewToModelPositionOutsideModelElement)(this.editor.model,(e=>e.hasClass("MyPlugin")))),this.editor.config.define("MyPluginConfig",{types:["date","first name","surname"]})}_defineSchema(){this.editor.model.schema.register("MyPlugin",{inheritAllFrom:"$inlineObject",allowAttributes:["name"]})}_defineConverters(){const e=this.editor.conversion;function i(e,t){const i=e.getAttribute("name"),o=t.createContainerElement("span",{class:"MyPlugin"}),n=t.createText("{"+i+"}");return t.insert(t.createPositionAt(o,0),n),o}e.for("upcast").elementToElement({view:{name:"span",classes:["MyPlugin"]},model:(e,{writer:t})=>{const i=e.getChild(0).data.slice(1,-1);return t.createElement("MyPlugin",{name:i})}}),e.for("editingDowncast").elementToElement({model:"MyPlugin",view:(e,{writer:o})=>{const n=i(e,o);return(0,t.toWidget)(n,o)}}),e.for("dataDowncast").elementToElement({model:"MyPlugin",view:(e,{writer:t})=>i(e,t)})}}class d extends e.Plugin{init(){const e=this.editor,t=(e.t,e.config.get("MyPluginConfig.types"));e.ui.componentFactory.add("MyPlugin",(i=>{const o=(0,n.createDropdown)(i);(0,n.addListToDropdown)(o,function(e){const t=new r.Collection;for(const i of e){const e={type:"button",model:new n.Model({commandParam:i,label:i,withText:!0})};t.add(e)}return t}(t)),o.buttonView.set({label:Drupal.t("MyPlugin"),tooltip:!0,withText:!0});const s=e.commands.get("MyPlugin");return o.bind("isEnabled").to(s),this.listenTo(o,"execute",(t=>{e.execute("MyPlugin",{value:t.source.commandParam}),e.editing.view.focus()})),o}))}}class c extends Command{execute({value:e}){const t=this.editor,i=t.model.document.selection;t.model.change((o=>{const n=o.createElement("MyPlugin",{...Object.fromEntries(i.getAttributes()),name:e});t.model.insertObject(n,null,null,{setSelection:"on"})}))}refresh(){const e=this.editor.model,t=e.document.selection,i=e.schema.checkChild(t.focus.parent,"MyPlugin");this.isEnabled=i}}const a={MyPlugin:s}})(),o=o.default})()));